# kiva クラウドファンディング資金予測
csv形式のデータと画像に対してマルチモーダルなデータセットの作成方法と前処理

## データ概要

### 訓練データの概要
- 画像ファイルが存在するデータ数：91029
- テーブルデータの総数：91333

### テストデータの概要
- 画像ファイルが存在するデータ数：91819
- テーブルデータの総数：91822

## Step1 データ作成
前と同様にmain.pyとZipMake.pyをダウンロードし、main.pyを実行

ただしZipMake.pyは同じディレクトリ内に保存

### 以前との変更点
- 各自の環境下でファイルパスの指定が不要
- ZipMake.pyの内容を大きく変更（LOAN_IDで画像データとテーブルデータを参照）
- 画像データをゼロパディングで増やしてテーブルデータと同数のデータを生成
- テーブルデータについての読み込みと前処理（王さんの前処理）を反映
- tensorflowのtf.data.Datasetを利用しているので画像モデルのmodel.fitの引数は１つのみ

### データ生成の手順
1. 訓練・テスト用の２つの画像zipファイルと３つのcsvファイル（合計５つ）を同じディレクトリ内に置く
2. isMakeDataフラグをTrueにするとデータ作成、作成後はFalseのまま
3. ZipMakeのメソッドのmake_train_data,make_test_dataはTrueに設定変更
4. main.pyの171行目のpdb.set_trace()でimage_and_label,df_trainを確認。
5. len()によりデータ数が5000ならば、データの前処理は終了

## Step2 モデル学習
1.  image_and_label(tf.data.Dataset型)には（画像データ,融資額(目的変数)）、df_trainでは、それらと対応したテーブルデータが5000個格納されている。
2.  画像用モデル、テーブルデータ用モデル、またはオリジナルのモデルにそれらの訓練データを適用し、モデル作成

## Step3　予測
1.  学習モデル作成後、194行以降でテストデータをモデルに適用して予測。
2.  予測した値を逐次的に提出用csvファイルに書き込む。
3.  215行目では提出csvが完成している状態。
